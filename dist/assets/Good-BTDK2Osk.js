import{_ as E,t as z,v as B,g as N,o as S,k as d,b as l,c as $,w as s,E as D,d as p,e as o,j as T,K as G,h as r,B as m,q as M,M as V,N as q,O as I,P as j}from"./index-CwP9YyYn.js";/* empty css             *//* empty css               *//* empty css              *//* empty css                  *//* empty css                     *//* empty css                 */const A={class:"header"},K=["src"],L={key:0,style:{color:"green"}},O={key:1,style:{color:"red"}},R=["onClick"],F=["onClick"],H=["onClick"],J=["onClick"],Q={__name:"Good",setup(U){const f=z(),{goTop:g}=f.appContext.config.globalProperties,u=B(),t=N({loading:!1,tableData:[],total:0,currentPage:1,pageSize:10});S(()=>{c()});const c=()=>{t.loading=!0,d.get("/foo/goods/list",{params:{id:1,pageNumber:t.currentPage,pageSize:t.pageSize}}).then(e=>{console.log(e),t.tableData=e.list,t.total=e.totalCount,t.currentPage=e.currPage,t.loading=!1,g&&g()})},b=()=>{u.push({path:"/add"})},k=e=>{u.push({path:"/add",query:{id:e}})},y=e=>{d.post("/foo/goods/delete",{id:e}).then(()=>{m.success("删除成功"),c()})},C=e=>{t.currentPage=e,c()},_=(e,h)=>{d.put("/foo/goods/status",{ids:e,status:h}).then(()=>{m.success("修改成功"),c()})};return(e,h)=>{const x=M,n=V,w=q,P=I,v=D;return l(),$(v,{class:"good-container"},{header:s(()=>[p("div",A,[o(x,{type:"primary",icon:G(j),onClick:b},{default:s(()=>[T("新增商品")]),_:1},8,["icon"])])]),default:s(()=>[o(w,{load:t.loading,data:t.tableData,"tooltip-effect":"dark",style:{width:"100%"}},{default:s(()=>[o(n,{prop:"id",label:"商品编号"}),o(n,{prop:"name",label:"商品名"}),o(n,{prop:"dec",label:"商品简介"}),o(n,{label:"商品图片",width:"150px"},{default:s(a=>[(l(),r("img",{style:{width:"100px",height:"100px"},key:a.row.id,src:e.$filters.prefix(a.row.img),alt:"商品主图"},null,8,K))]),_:1}),o(n,{prop:"offernum",label:"商品库存"}),o(n,{prop:"price",label:"商品售价"}),o(n,{label:"上架状态"},{default:s(a=>[a.row.offer==0?(l(),r("span",L,"销售中")):(l(),r("span",O,"已下架"))]),_:1}),o(n,{label:"操作",width:"150px"},{default:s(a=>[p("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:i=>y(a.row.id)},"删除",8,R),p("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:i=>k(a.row.id)},"修改",8,F),a.row.offer==0?(l(),r("a",{key:0,style:{cursor:"pointer","margin-right":"10px"},onClick:i=>_(a.row.id,1)},"下架",8,H)):(l(),r("a",{key:1,style:{cursor:"pointer","margin-right":"10px"},onClick:i=>_(a.row.id,0)},"上架",8,J))]),_:1})]),_:1},8,["load","data"]),o(P,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage,onCurrentChange:C},null,8,["total","page-size","current-page"])]),_:1})}}},ae=E(Q,[["__scopeId","data-v-dbe61105"]]);export{ae as default};
